<!DOCTYPE html>
<html lang="en" dir="ltr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MR CRAZY | Elite Sim Database</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&family=Amiri:wght@400;700&display=swap" rel="stylesheet">

    <style>
        :root {
            --bg-night: #0b001a;
            --bg-card: rgba(18, 10, 40, 0.75);
            --gold: #d4af37;
            --gold-glow: #f0d070;
            --teal: #00c4b4;
            --teal-glow: #00e0d0;
            --text-main: #f8f1e9;
            --text-sub: #c0b8d0;
            --border-gold: rgba(212, 175, 55, 0.4);
            --shadow-gold: 0 0 40px rgba(212,175,55,0.3);
        }

        * { box-sizing: border-box; margin: 0; padding: 0; -webkit-tap-highlight-color: transparent; }

        body {
            background: var(--bg-night);
            color: var(--text-main);
            font-family: 'Poppins', sans-serif;
            min-height: 100vh;
            padding: 10px 8px;
            background-image: 
                radial-gradient(circle at 20% 30%, rgba(212,175,55,0.08) 0%, transparent 40%),
                radial-gradient(circle at 80% 70%, rgba(0,196,180,0.06) 0%, transparent 50%);
            background-attachment: fixed;
        }

        body::before {
            content: '';
            position: fixed;
            inset: 0;
            background: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="100" height="100" viewBox="0 0 100 100"><path d="M10 10 L30 30 M70 30 L90 10 M10 70 L30 90 M70 70 L90 90" stroke="%23d4af37" stroke-width="1" opacity="0.08"/></svg>') repeat;
            pointer-events: none;
            opacity: 0.15;
        }

        .ramzan-banner {
            width: 100%;
            margin: 0 auto 16px;
            background: linear-gradient(135deg, rgba(18,10,40,0.85), rgba(11,0,26,0.85));
            border: 1px solid var(--border-gold);
            border-radius: 18px;
            padding: 14px 12px;
            text-align: center;
            box-shadow: var(--shadow-gold);
            backdrop-filter: blur(6px);
        }

        .banner-title {
            font-family: 'Amiri', serif;
            font-size: 1.8rem;
            color: var(--gold);
            text-shadow: 0 0 15px var(--gold-glow);
            margin-bottom: 6px;
        }

        .banner-location { font-size: 1rem; color: var(--teal); margin: 4px 0; }
        .banner-roza { font-size: 1.05rem; color: var(--text-sub); margin: 6px 0; }

        .times-row { display: flex; justify-content: center; gap: 14px; margin: 12px 0; flex-wrap: wrap; }
        .time-card {
            background: rgba(212,175,55,0.08);
            border: 1px solid var(--gold);
            border-radius: 12px;
            padding: 10px 16px;
            min-width: 120px;
            box-shadow: 0 4px 15px rgba(212,175,55,0.15);
        }
        .time-label { font-size: 0.85rem; color: var(--text-sub); }
        .time-value { font-size: 1.25rem; font-weight: 700; color: var(--teal); }

        .countdown, .next-prayer {
            font-size: 1.05rem;
            color: var(--gold);
            font-weight: 600;
            margin-top: 10px;
            text-shadow: 0 0 10px rgba(212,175,55,0.5);
        }

        /* All other styles (popup, app-container, cards, WhatsApp float) same as previous premium version - no changes */
        .ramzan-popup { position: fixed; inset: 0; background: rgba(8, 4, 28, 0.96); display: flex; align-items: center; justify-content: center; z-index: 9999; opacity: 0; visibility: hidden; transition: opacity 1s ease; }
        .ramzan-popup.show { opacity: 1; visibility: visible; }
        .popup-content { background: linear-gradient(145deg, #140d38, #0b0528); border: 3px solid var(--gold); border-radius: 28px; padding: 40px 28px; max-width: 360px; width: 92%; text-align: center; box-shadow: 0 0 80px rgba(212,175,55,0.6), inset 0 0 30px rgba(0,196,180,0.15); position: relative; animation: popupScale 1.2s ease-out; overflow: hidden; }
        @keyframes popupScale { 0% { transform: scale(0.8) translateY(50px); opacity: 0; } 100% { transform: scale(1) translateY(0); opacity: 1; } }
        .popup-content::before { content: ''; position: absolute; top: -50%; left: -50%; width: 200%; height: 200%; background: radial-gradient(circle, rgba(212,175,55,0.12) 10%, transparent 40%); animation: rotateGlow 30s linear infinite; pointer-events: none; }
        @keyframes rotateGlow { 0% { transform: rotate(0deg); } 100% { transform: rotate(360deg); } }
        .popup-moon { font-size: 7rem; color: var(--gold-glow); text-shadow: 0 0 50px var(--gold-glow); margin-bottom: 15px; animation: glowPulse 4s infinite alternate; }
        @keyframes glowPulse { 0% { text-shadow: 0 0 40px var(--gold-glow); } 100% { text-shadow: 0 0 90px var(--gold-glow); } }
        .lanterns { display: flex; justify-content: center; gap: 40px; margin: 10px 0; }
        .lantern { font-size: 4rem; color: #ffbb33; animation: swing 7s infinite ease-in-out; }
        .lantern:nth-child(2) { animation-delay: 1.5s; }
        @keyframes swing { 0%,100% { transform: rotate(-10deg); } 50% { transform: rotate(10deg); } }
        .popup-title { font-family: 'Amiri', serif; font-size: 3.2rem; color: var(--gold); text-shadow: 0 0 20px var(--gold-glow); margin: 10px 0; }
        .arabic { font-size: 2.6rem; color: var(--teal); margin: 8px 0; text-shadow: 0 0 15px var(--teal-glow); }
        .popup-text { font-size: 1.1rem; color: var(--text-sub); line-height: 1.6; margin: 15px 0; }
        .from-team { color: var(--gold); font-weight: 700; font-size: 1.1rem; margin-top: 20px; }
        .close-btn { position: absolute; top: 15px; right: 20px; font-size: 2.4rem; color: var(--text-sub); cursor: pointer; transition: color 0.3s; }
        .close-btn:hover { color: var(--gold); }

        .app-container { width: 100%; max-width: 420px; background: var(--bg-card); border: 1px solid var(--border-gold); border-radius: 24px; padding: 24px 16px; box-shadow: var(--shadow-gold), 0 15px 50px rgba(0,0,0,0.6); margin: 0 auto; backdrop-filter: blur(8px); animation: fadeUp 1s ease-out; }
        @keyframes fadeUp { from { opacity: 0; transform: translateY(30px); } to { opacity: 1; transform: translateY(0); } }
        .logo-circle { width: 90px; height: 90px; margin: 0 auto 16px; border-radius: 50%; background: linear-gradient(135deg, #1a1035, #0f0825); border: 4px solid var(--gold); box-shadow: 0 0 50px rgba(212,175,55,0.4); display: flex; align-items: center; justify-content: center; font-family: 'Amiri', serif; font-size: 2.8rem; color: var(--gold-glow); animation: pulse 5s infinite ease-in-out; }
        @keyframes pulse { 0%,100% { transform: scale(1); } 50% { transform: scale(1.05); } }
        h1 { font-size: 2rem; text-align: center; color: var(--gold); letter-spacing: 2px; text-shadow: 0 0 15px var(--gold-glow); margin-bottom: 8px; }
        .subtitle { text-align: center; font-size: 1.4rem; color: var(--teal); margin-bottom: 20px; }
        input { width: 100%; padding: 16px; font-size: 1.05rem; background: rgba(30,20,50,0.6); border: 1.5px solid rgba(212,175,55,0.3); color: var(--text-main); border-radius: 14px; margin-bottom: 16px; transition: all 0.4s; }
        input:focus { border-color: var(--gold); box-shadow: 0 0 0 6px rgba(212,175,55,0.2); background: rgba(40,30,60,0.7); }
        .btn-main { width: 100%; padding: 16px; font-size: 1.1rem; font-weight: 700; background: linear-gradient(90deg, var(--gold), #e8c050, var(--gold)); color: #0f001a; border: none; border-radius: 14px; cursor: pointer; box-shadow: 0 10px 30px rgba(212,175,55,0.5); transition: all 0.4s; letter-spacing: 1.5px; }
        .btn-main:hover { transform: translateY(-4px); box-shadow: 0 15px 45px rgba(212,175,55,0.7); }
        .loader { text-align: center; color: var(--teal); font-size: 1.6rem; margin: 20px 0; display: none; }
        .data-card { background: rgba(20,15,45,0.7); border: 1px solid rgba(212,175,55,0.25); border-left: 5px solid var(--teal); border-radius: 16px; margin-bottom: 16px; overflow: hidden; animation: cardSlide 0.7s ease-out; }
        @keyframes cardSlide { from { opacity: 0; transform: translateX(-20px); } to { opacity: 1; transform: translateX(0); } }
        .dc-header { background: rgba(212,175,55,0.12); padding: 10px 16px; color: var(--gold); display: flex; justify-content: space-between; font-weight: 600; font-size: 0.95rem; }
        .dc-body { padding: 12px 16px; font-size: 0.95rem; }
        .dc-row { display: flex; justify-content: space-between; padding: 8px 0; border-bottom: 1px dashed rgba(212,175,55,0.2); }
        .lbl { color: var(--text-sub); }
        .val { color: var(--text-main); text-align: right; word-break: break-word; }
        .contact-info { text-align: center; margin: 20px 0; font-size: 0.95rem; color: var(--text-sub); }
        .contact-info a { color: var(--teal); text-decoration: none; }
        .footer { text-align: center; margin-top: 25px; color: var(--text-sub); font-size: 0.85rem; }
        .brand-name { color: var(--gold); font-weight: 700; font-size: 1.1rem; }
        .whatsapp-float { position: fixed; bottom: 16px; right: 16px; z-index: 999; }
        .whatsapp-float a { width: 55px; height: 55px; background: #25D366; border-radius: 50%; display: flex; align-items: center; justify-content: center; font-size: 1.9rem; color: white; box-shadow: 0 8px 25px rgba(37,211,102,0.4); transition: all 0.3s; }
        .whatsapp-float a:hover { transform: scale(1.1); }

        @media (max-width: 400px) {
            .banner-title { font-size: 1.5rem; }
            .time-card { min-width: 100px; padding: 8px 12px; }
            .time-value { font-size: 1.1rem; }
            h1 { font-size: 1.7rem; }
            .popup-content { padding: 30px 20px; }
            .popup-moon { font-size: 5.5rem; }
        }
    </style>
</head>
<body>

    <div class="ramzan-banner">
        <h2 class="banner-title">ÿ±ŸÖÿ∂ÿßŸÜ ŸÖÿ®ÿßÿ±⁄©</h2>
        <p class="banner-location" id="userLocation">Your Location: Detecting...</p>
        <p class="banner-roza" id="bannerRoza">Calculating today's Roza...</p>

        <div class="times-row">
            <div class="time-card">
                <div class="time-label">ÿ≥ÿ≠ÿ±€å ⁄©ÿß ÿ¢ÿÆÿ±€å ŸàŸÇÿ™</div>
                <div class="time-value" id="sehriTime">05:16 AM</div>
            </div>
            <div class="time-card">
                <div class="time-label">ÿßŸÅÿ∑ÿßÿ± ⁄©ÿß ŸàŸÇÿ™</div>
                <div class="time-value" id="iftarTime">05:55 PM</div>
            </div>
        </div>

        <div class="countdown" id="countdown">ÿß⁄ØŸÑ€å ŸÜŸÖÿßÿ≤ ÿ™⁄© ŸàŸÇÿ™: calculating...</div>
        <div class="next-prayer" id="nextPrayer">ÿß⁄ØŸÑ€å ŸÜŸÖÿßÿ≤: calculating...</div>
    </div>

    <!-- Popup same -->
    <div class="ramzan-popup" id="ramzanPopup">
        <div class="popup-content">
            <span class="close-btn" id="closePopup">√ó</span>
            <div class="popup-moon">üåô</div>
            <div class="lanterns">
                <div class="lantern">ü™î</div>
                <div class="lantern">ü™î</div>
            </div>
            <h2 class="popup-title">MRCRAZY</h2>
            <div class="arabic">ÿ±ŸéŸÖŸéÿ∂ŸéÿßŸÜŸè ŸÖŸèÿ®Ÿéÿßÿ±ŸéŸÉŸå</div>
            <p class="popup-text">May this sacred month bring you endless peace, forgiveness, and spiritual growth. üåôü§≤</p>
            <p class="from-team">⁄©€å ÿ¨ÿßŸÜÿ® ÿ≥€í ÿØŸÑ ⁄©€å ⁄Ø€Åÿ±ÿßÿ¶€åŸà⁄∫ ÿ≥€í ÿ±ŸÖÿ∂ÿßŸÜ ŸÖÿ®ÿßÿ±⁄©!</p>
        </div>
    </div>

    <div class="app-container">
        <div class="logo-wrapper">
            <div class="logo-circle">MRC</div>
        </div>

        <div class="title-box">
            <h1>MRCRAZY OFFICIAL</h1>
            <div class="subtitle">Elite Sim Database</div>
        </div>

        <input type="number" id="target" placeholder="Mobile Number or CNIC (ÿ®ÿØŸàŸÜ dashes)" inputmode="numeric">
        <button class="btn-main" onclick="fetchData()">RESOLVE NOW</button>

        <div id="loader" class="loader"><i class="fas fa-circle-notch fa-spin"></i> Loading...</div>

        <div id="results-area"></div>

        <div class="contact-info">
            <p>Data na mile to WhatsApp contact karen.<br>Charges: Rs. 450 only.</p>
            <p><i class="fab fa-whatsapp"></i> <a href="https://wa.me/923236876132?text=Assalam-o-Alaikum%20premium%20data%20chahiye" target="_blank">03236876132</a></p>
        </div>

        <div class="footer">
            <div class="brand-name">POWERED BY MUHAMMAD NAEEM ‚Ä¢ 2026</div>
        </div>
    </div>

    <div class="whatsapp-float">
        <a href="https://wa.me/923236876132?text=Hey%20sir%20premium%20data" target="_blank">
            <i class="fab fa-whatsapp"></i>
        </a>
    </div>

    <script>
        // Popup same
        const popup = document.getElementById('ramzanPopup');
        const closePopup = document.getElementById('closePopup');
        window.onload = () => {
            popup.classList.add('show');
            setTimeout(() => popup.classList.remove('show'), 12000);
            detectLocationAndUpdateBanner();
            updatePrayerCountdown();
        };
        closePopup.onclick = () => popup.classList.remove('show');
        popup.onclick = (e) => { if (e.target === popup) popup.classList.remove('show'); };

        // Location detection + dynamic Roza calculation
        async function detectLocationAndUpdateBanner() {
            const locEl = document.getElementById('userLocation');
            const rozaEl = document.getElementById('bannerRoza');
            locEl.textContent = "Your Location: Detecting...";

            let city = 'Lahore';
            let region = 'Punjab, Pakistan';

            if (navigator.geolocation) {
                navigator.geolocation.getCurrentPosition(async (pos) => {
                    const { latitude, longitude } = pos.coords;
                    try {
                        const res = await fetch(`https://nominatim.openstreetmap.org/reverse?format=json&lat=${latitude}&lon=${longitude}&zoom=10&addressdetails=1`);
                        const data = await res.json();
                        city = data.address.city || data.address.town || data.address.state_district || 'Lahore';
                        region = data.address.state || 'Pakistan';
                        locEl.textContent = `Your Location: ${city}, ${region}`;
                    } catch {
                        locEl.textContent = 'Your Location: Lahore, Punjab, Pakistan';
                    }
                    updateRozaAndTimes(city); // Update roza & times after location
                }, () => {
                    locEl.textContent = 'Your Location: Lahore, Punjab, Pakistan';
                    updateRozaAndTimes('Lahore');
                });
            } else {
                locEl.textContent = 'Your Location: Lahore, Punjab, Pakistan';
                updateRozaAndTimes('Lahore');
            }
        }

        function updateRozaAndTimes(city) {
            const today = new Date();
            const ramadanStart = new Date(2026, 1, 19); // 19 Feb 2026 = 1 Ramadan (Pakistan)
            const diffDays = Math.floor((today - ramadanStart) / (1000 * 60 * 60 * 24)) + 1;
            const rozaNumber = (diffDays > 0 && diffDays <= 30) ? diffDays : 'Calculating...';

            document.getElementById('bannerRoza').textContent = `${rozaNumber} ÿ±ŸÖÿ∂ÿßŸÜ  ‚Äì ${today.toLocaleDateString('ur-PK', {day: 'numeric', month: 'long', year: 'numeric'})} (ÿ¢ÿ¨ ⁄©ÿß ÿ±Ÿàÿ≤€Å)`;

            // Sehri/Iftar for 22 Feb 2026 Lahore (Hanafi) - can be made dynamic later with API
            document.getElementById('sehriTime').textContent = '05:16 AM';
            document.getElementById('iftarTime').textContent = '05:55 PM';
        }

        // Full prayers countdown to next one
        function updatePrayerCountdown() {
            const countdownEl = document.getElementById('countdown');
            const nextPrayerEl = document.getElementById('nextPrayer');

            const prayers = [
                { name: "ŸÅÿ¨ÿ±", time: [5, 17] },
                { name: "ÿ∏€Åÿ±", time: [12, 16] },
                { name: "ÿπÿµÿ±", time: [16, 16] },
                { name: "ŸÖÿ∫ÿ±ÿ®", time: [17, 54] },
                { name: "ÿπÿ¥ÿßÿ°", time: [19, 15] }
            ];

            const now = new Date();
            let nextIndex = 0;
            let targetTime = new Date(now.getFullYear(), now.getMonth(), now.getDate(), prayers[0].time[0], prayers[0].time[1], 0);

            for (let i = 0; i < prayers.length; i++) {
                const pt = new Date(now.getFullYear(), now.getMonth(), now.getDate(), prayers[i].time[0], prayers[i].time[1], 0);
                if (now < pt) {
                    targetTime = pt;
                    nextIndex = i;
                    break;
                }
            }

            if (nextIndex === 0 && now > targetTime) {
                targetTime.setDate(targetTime.getDate() + 1);
            }

            const prayerName = prayers[nextIndex].name;

            setInterval(() => {
                const diff = targetTime - new Date();
                if (diff <= 0) {
                    countdownEl.textContent = `${prayerName} ⁄©ÿß ŸàŸÇÿ™ €ÅŸà ⁄Ø€åÿß! üåô`;
                    nextPrayerEl.textContent = "";
                    return;
                }
                const h = Math.floor(diff / 3600000);
                const m = Math.floor((diff % 3600000) / 60000);
                const s = Math.floor((diff % 60000) / 1000);
                countdownEl.textContent = `ÿß⁄ØŸÑ€å ŸÜŸÖÿßÿ≤ ÿ™⁄©: ${h} ⁄Ø⁄æŸÜŸπ€í ${m} ŸÖŸÜŸπ ${s} ÿ≥€å⁄©ŸÜ⁄à`;
                nextPrayerEl.textContent = `ÿß⁄ØŸÑ€å ŸÜŸÖÿßÿ≤: ${prayerName} ‚Äì ŸàŸÇÿ™ ÿ®ÿßŸÇ€å`;
            }, 1000);
        }

        // Fetch logic unchanged
        const API_URL = "https://sim.f-a-k.workers.dev/?q=";
        const loader = document.getElementById('loader');
        const resArea = document.getElementById('results-area');
        const input = document.getElementById('target');

        async function fetchData() {
            let query = input.value.trim();
            if (query.length < 10) return alert("Valid number ya CNIC daalen.");

            resArea.innerHTML = '';
            resArea.style.display = 'block';
            loader.style.display = 'block';

            try {
                await new Promise(r => setTimeout(r, 1200));
                const res = await fetch(API_URL + query);
                const json = await res.json();
                loader.style.display = 'none';

                if (json.status === 'success') renderCards(json.data);
                else resArea.innerHTML = '<div style="text-align:center; color:#ff9999; padding:15px;">No Data ‚Äì WhatsApp Contact Karen!</div>';
            } catch (e) {
                loader.style.display = 'none';
                resArea.innerHTML = '<div style="text-align:center; color:#ff9999; padding:15px;">Error ‚Äì WhatsApp: 03236876132</div>';
            }
        }

        function renderCards(data) {
            let records = Array.isArray(data) ? data : [data].filter(Boolean);
            let html = records.map((rec, i) => `
                <div class="data-card">
                    <div class="dc-header">
                        <span>Record #${i+1}</span>
                        <span><i class="fas fa-check-circle"></i> Verified</span>
                    </div>
                    <div class="dc-body">
                        ${Object.entries(rec).map(([k,v]) => {
                            if (['response_code','credit','api_owner'].includes(k)) return '';
                            return `<div class="dc-row"><span class="lbl">${k.toUpperCase()}</span><span class="val">${v || 'N/A'}</span></div>`;
                        }).join('')}
                    </div>
                </div>
            `).join('');

            resArea.innerHTML = html || '<div style="text-align:center; color:#ffcc99; padding:20px;">No records found.</div>';
        }

        input.addEventListener("keypress", e => { if (e.key === "Enter") fetchData(); });
    </script>
</body>
</html>